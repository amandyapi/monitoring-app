<div class="card-body">
  <h4 class="card-title"><span class="lstick"></span>Filtre de transactions</h4>
</div>
<div class="row">
  <div class="col-lg-3 col-md-6">
    <div class="card bg-info">
      <div class="card-body">
        <div class="d-flex no-block">
          <div class="m-r-20 align-self-center">
            <img src="assets/images/icon/list.png" alt="Income" />
          </div>
          <div class="align-self-center">
            <h6 class="text-white m-t-10 m-b-0">Nombre total de transaction</h6>
            <h2 class="m-t-0 text-white">{{ transactionsTotal }}</h2>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6">
    <div class="card bg-success">
      <div class="card-body">
        <div class="d-flex no-block">
          <div class="m-r-20 align-self-center">
            <img src="assets/images/icon/success.png" alt="Income" />
          </div>
          <div class="align-self-center">
            <h6 class="text-white m-t-10 m-b-0">Transaction Succès</h6>
            <h2 class="m-t-0 text-white">{{ transactionsSuccess }}</h2>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6">
    <div class="card bg-danger">
      <div class="card-body">
        <div class="d-flex no-block">
          <div class="m-r-20 align-self-center">
            <img src="assets/images/icon/failed.png" alt="Income" />
          </div>
          <div class="align-self-center">
            <h6 class="text-white m-t-10 m-b-0">Transaction échouées</h6>
            <h2 class="m-t-0 text-white">{{ transactionsFailed }}</h2>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6">
    <div class="card bg-primary">
      <div class="card-body">
        <div class="d-flex no-block">
          <div class="m-r-20 align-self-center">
            <img src="assets/images/icon/pending.png" alt="Income" />
          </div>
          <div class="align-self-center">
            <h6 class="text-white m-t-10 m-b-0">Transaction suspendues</h6>
            <h2 class="m-t-0 text-white">{{ transactionsHold }}</h2>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <div class="col-lg-12 col-md-12">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">
            <span class="lstick"></span>Transactions récentes
          </h4>
          <div class="">
            <table
              id="transactions"
              class="table table-sm vm no-th-brd pro-of-month mb-0 no-wrap"
            >
              <thead>
                <tr>
                  <th>Code client</th>
                  <th>Montant</th>
                  <th>Service</th>
                  <th>Date</th>
                  <th>Lieu</th>
                  <th>Statut</th>
                  <th>Détails</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let transaction of latestTransactions">
                  <td>{{ transaction.clientCode }}</td>
                  <td>{{ transaction.amount }}</td>
                  <td>{{ transaction.service.name }}</td>
                  <td>{{ transaction.created }}</td>
                  <td>{{ transaction.kiosk.name }}</td>
                  <td *ngIf="transaction.status == 0">
                    <span class="label label-success label-rounded"
                      >Succès</span
                    >
                  </td>
                  <td *ngIf="transaction.status == 1">
                    <span class="label label-danger label-rounded">Echec</span>
                  </td>
                  <td *ngIf="transaction.status == 2">
                    <span class="label label-danger label-rounded"
                      >Suspendu</span
                    >
                  </td>
                  <td>
                    <button
                      type="button"
                      (click)="setCurrentTransaction(transaction)"
                      (click)="open(content)"
                      class="btn-circle btn-sm btn-primary float-right text-white border-0"
                    >
                      <i class="fas fa-eye"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">
      Détails transaction
    </h4>

    <button
      class="btn btn-outline-default"
      (click)="modal.dismiss('Cross click')"
    >
    <i class="fas fa-times"></i>
  </button>
  </div>
  <div class="modal-body">
    <form>
      <div class="row">
        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Référence&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.operationRef}}</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Code client&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.clientCode}}</span>
          </div>
        </div>

        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Statut&nbsp;&nbsp;</span>
            <button
            class="btn btn-sm btn-success btn-rounded"
            *ngIf="currentTrasaction.status == 0">
            Succès
          </button>
          <button
            class="btn btn-sm btn-danger btn-rounded"
            *ngIf="currentTrasaction.status == 1">
            Echec
          </button>
          <button
            class="btn btn-sm btn-info btn-rounded"
            *ngIf="currentTrasaction.status == 2">
            Suspendu
          </button>
          </div>
        </div>
      </div>

      <div class="row">

        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Compte client&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.clientAccount}}</span>
          </div>
        </div>

        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Compte crédit&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.creditAccount}}</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Montant&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.amount}}</span>
          </div>
        </div>
      </div>
      <hr>
      <h4 class="text-muted">Billetage</h4>

      <div class="row">
        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Note_10000&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.billing.note_10000}}</span>
          </div>
        </div>
        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Note_5000&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.billing.note_5000}}</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Note_2000&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.billing.note_2000}}</span>
          </div>
        </div>
        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Note_1000&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.billing.note_1000}}</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Service&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.serviceName}}</span>
          </div>
        </div>
        <div class="form-group col mb-3">
          <div class="input-group">
            <span class="font-weight-bold">Lieu&nbsp;&nbsp;</span>
            <span class="font-weight-normal">{{currentTrasaction.kioskName}}</span>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="modal.dismiss('Cross click')" >Fermer</button>
  </div>
</ng-template>
